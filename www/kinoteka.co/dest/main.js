!function(){angular.module("directives",[]),angular.module("ngUtils",[]);var t=angular.module("application",["ngRoute","ngUtils","directives"]);t.run(["ROUTES","$rootScope","translations",function(t,e,n){e.ROUTES=t,e.trans=n,e.locale="rus",e.homeFilter=""}])}(),function(t){return t.module("application").constant("translations",{eng:{nav:{home:{name:"home",title:"Home"},films:{name:"film",title:"Films"},shows:{name:"shows",title:"Shows"},about:{name:"about",title:"About"}}},rus:{nav:{home:{name:"home",title:"Главная"},films:{name:"film",title:"Фильмы"},shows:{name:"shows",title:"Сериалы"}}}})}(angular),function(t){var e;return e=t.module("application"),e.config(["$routeProvider","$locationProvider","ROUTES",function(t,e,n){return e.hashPrefix("!"),t.when(n.home,{controller:"homeCtrl",controllerAs:"hc",templateUrl:"/templates/home.tmpl.html"}),t.when(n.film+":filmId",{controller:"filmCtrl",controllerAs:"fm",templateUrl:"/templates/film/film.tmp.html"}),t.when(n.about,{templateUrl:"/templates/about.tmpl.html"}),t.otherwise("/")}])}(angular),function(t){return t.module("application").constant("ROUTES",{pathPrefix:"!",convert:function(t){return"#"+this.pathPrefix+t},film:"/film/",home:"/",about:"/about/",shows:"/shows/"})}(angular),function(){"use strict";function t(){return{restrict:"A",templateUrl:"templates/slider.html",controller:["$scope",function(t){}],link:function(t,e,n){t.active=null,t.items=[{title:"Hunger Games: Mockingjay",img:"http://www.bringthenoiseuk.com/wordpress/wp-content/uploads/Hunger-Games-Catching-Fire-Quarter-Quell-Katniss-and-Peeta-640x480.jpg"},{title:"Hunger Games: Mockingjay, part II",img:"http://uk.eonline.com/eol_images/Entire_Site/201568/rs_634x977-150708125711-634.Jennifer-Lawrence-Katnis-Hunger-Games-Mickingjay-2.jl.070815.jpg"},{title:"Notitle picture 2",img:"none"},{title:"Notitle picture",img:"none"}],t.active=t.items[Math.abs(Math.floor(Math.random()*t.items.length))],t.items.isActive=function(e){return t.active===e},t.items.setActive=function(e){t.active=e},t.$on("onrepeat.end",function(){function r(t){var e=$(this);e.unbind("click",r),e.next().next().unbind("click",i),a.translateRight(o),e.prev().on("click",r),e.next().on("click",i)}function i(t){var e=$(this);e.unbind("click",i),e.prev().prev().unbind("click",r),a.translateLeft(o),e.prev().on("click",r),e.next().on("click",i)}e.find(".slider").find("img").each(function(t,e){var n=$(e);n.one("load",function(){var t=n.width()/n.height(),e=16/9;e>t?n.addClass("full-width"):t>=e&&n.addClass("full-height"),n.removeClass("invisible")})});var a=e.find(".slider .slider-items > ul"),o=parseInt(a.children("li").outerWidth(!0))||0,l=$(a.children().get(t.$eval(n.getActive))),s=l.prev(),c=l.next();s.bind("click",r),c.bind("click",i),a.translateToX(-(l.index()>-1&&l.index()||0)*o)})}}}angular.module("directives").directive("appSlider",[t])}(),function(){function t(){return{restrict:"A",priority:-1,compile:function(t,e){if(!e.ngRepeat)throw new Error("ngOnrepeat requires to be used on the DOM element whit ngRepeat directive");var n=e.ngOnrepeat&&e.ngOnrepeat.split(/[\s\,]+/),r=e.ngOnRepeatEvent||"onrepeat";return function(t){function e(e){var n=r+("onrepeat"!==r&&".repeat."||".")+e;t.$emit(n),t.$broadcast(n)}if(!n)throw new Error('No arguments added in the ngOnRepeat attribute. Please put at least on of the "start", or "end"');t.$first&&n.indexOf("start")>-1&&e("start"),t.$last&&n.indexOf("end")>-1&&e("end")}}}}angular.module("ngUtils").directive("ngOnrepeat",[t])}(),function(){"use strict";function t(){}var e=[1,0,0,1,0,0],n=/(([-+]?[0-9]+)(\.[0-9]+)?)(.{1,2})?/;t.constructor=t,t.prototype={translationMatrix:function(){var t=this.css("transform");return"none"===t?e:t.split(",").map(function(t){return parseInt(n.exec(t)[1])})},translateToX:function(t){t=n.exec(""+t)[1];var e=this.translationMatrix();return e[4]=t,this.css("transform","matrix("+e.join(",")+")")},translateX:function(t,e){if(0===arguments.length)return this.translationMatrix()[4];if(!t)throw new Error("Please enter first argument as string translate configuration for X coordinate, or first argument as number of move, and second argument as type of move [% or px]");if("string"==typeof t){var r=n.exec(t);t=r[1],e=r[3]}if(this.css){var i=this.translateX(),a="%"===e&&t*this.width()/100+i||i+ +t;return this.translateToX(a)}},translateRight:function(t,e){return this.translateX(t,e)},translateLeft:function(t,e){return this.translateX("-"+t,e)},translateToY:function(t){t=n.exec(""+t)[1];var e=this.translationMatrix();return e[5]=t,this.css("transform","matrix("+e.join(",")+")")},translateY:function(t,e){if(0===arguments.length)return this.translationMatrix()[5];if(!t)throw new Error("Please enter first argument as string translate configuration for X coordinate, or first argument as number of move, and second argument as type of move [% or px]");if("string"==typeof t){var r=n.exec(t);t=r[1],e=r[3]}if(this.css){var i=this.translateY(),a="%"===e&&t*this.width()/100+i||i+ +t;return this.translateToY(a)}},translateUp:function(t,e){return this.translateY(t,e)},translateDown:function(t,e){return this.translateY("-"+t,e)}};var r=window.jQuery||window.$;r&&r.extend(r.prototype,new t)}(),function(t){var e;return e=t.module("application"),e.controller("filmCtrl",["$route","$log",function(t,e){return e.info("Film controller loaded")}])}(angular),function(t){return t.module("directives").directive("header",["$log","$location","ROUTES",function(e,n,r){return{restrict:"A",templateUrl:"/templates/header.tmpl.html",controller:function(){return e.info("Header loaded")},link:function(e,i){var a,o,l,s,c;e.isActive=function(t){var e;return t===(e=r.convert(r.home))&&e===r.convert(n.path())||t!==r.convert(r.home)&&-1!==n.absUrl().indexOf(t)},l=t.element("a.menu-toggle"),o=t.element(l.attr("data-toggle")),s=t.element(".search-form"),c="invisible",l.on("click",function(){o.toggleClass(c)}),a=t.element(document),a.on("click",function(t){s.is(t.target)||s.has(t.target).length||(o.has(t.target).length?setTimeout(function(){o.addClass(c)},120):l.is(t.target)||l.has(t.target).length||o.addClass(c))}),t.element(window).resize(function(){a.width()>=720&&o.addClass(c)})}}}])}(angular),function(t){var e;return e=t.module("application"),e.controller("homeCtrl",["$route","$scope",function(t,e){return e.sections=[{name:"New on site",items:[{title:"Iron man",year:2010,img:"http://cdn.collider.com/wp-content/uploads/2015/04/iron-man-1-poster.jpg"},{title:"Iron man 2",year:2011},{title:"Iron man 3",year:2012},{title:"Thor",year:2013,img:"http://cdn.collider.com/wp-content/uploads/thor-the-dark-world-poster1.jpg"},{title:"Avengers",img:"http://i1.wp.com/bitcast-a-sm.bitgravity.com/slashfilm/wp/wp-content/images/International-Avengers-Age-of-Ultron-Poster-700x989.jpg?resize=700%2C989"},{title:"Avengers 2",img:"https://s-media-cache-ak0.pinimg.com/originals/bc/21/53/bc2153bd4587248d645555b249dd7a64.jpg"},{title:"Hulk",img:"http://cloudfront.posters2prints.com/width/430/bestfit/progressive/quality/75/9344-2.jpg"}]}]}])}(angular);